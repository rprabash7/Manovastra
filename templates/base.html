<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Manovastra - Premium Sarees{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M1 19h22M1 12h22M1 5h22" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </button>

            <div class="header-logo">
                <a href="/">
                    <img src="{% static 'Images/Manovastra.png' %}" alt="Manovastra Logo">
                </a>
            </div>

            <nav class="header-nav">
                <ul class="nav-list">
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link">Categories</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Sarees</a></li>
                            <li><a href="#">Kurta Set</a></li>
                            <li><a href="#">Kurtis</a></li>
                            <li><a href="#">Gowns</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Best Selling Sarees</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Latest Sarees Collection</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link">Wedding Picks</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Haldi Wear</a></li>
                            <li><a href="#">Mehndi Wear</a></li>
                            <li><a href="#">Sangeet Wear</a></li>
                            <li><a href="#">Wedding Wear</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <div class="header-icons">
                <button class="icon-btn" id="searchBtn" aria-label="Search">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M10.364 3a7.364 7.364 0 1 0 0 14.727 7.364 7.364 0 0 0 0-14.727Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M15.857 15.858 21 21.001" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>

                <a href="#" class="icon-btn" aria-label="Wishlist">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </a>

                <a href="#" class="icon-btn" aria-label="Account">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M16.125 8.75c-.184 2.478-2.063 4.5-4.125 4.5s-3.944-2.021-4.125-4.5c-.187-2.578 1.64-4.5 4.125-4.5 2.484 0 4.313 1.969 4.125 4.5Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M3.017 20.747C3.783 16.5 7.922 14.25 12 14.25s8.217 2.25 8.984 6.497" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </a>

                <a href="#" class="icon-btn cart-icon" aria-label="Cart">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M4.75 8.25A.75.75 0 0 0 4 9L3 19.125c0 1.418 1.207 2.625 2.625 2.625h12.75c1.418 0 2.625-1.149 2.625-2.566L20 9a.75.75 0 0 0-.75-.75H4.75Zm2.75 0v-1.5a4.5 4.5 0 0 1 4.5-4.5v0a4.5 4.5 0 0 1 4.5 4.5v1.5" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span class="cart-count">0</span>
                </a>
            </div>
        </div>

        <div class="search-overlay" id="searchOverlay">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search for sarees, collections...">
                <button class="search-close" id="searchClose">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="none">
                        <path d="m1 1 14 14M1 15 15 1" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="mobile-sidebar" id="mobileSidebar">
            <div class="sidebar-header">
                <h3>Menu</h3>
                <button class="sidebar-close" id="sidebarClose">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="none">
                        <path d="m1 1 14 14M1 15 15 1" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </button>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#">Categories</a></li>
                    <li><a href="#">Best Selling Sarees</a></li>
                    <li><a href="#">Latest Sarees Collection</a></li>
                    <li><a href="#">Wedding Picks</a></li>
                    <li><a href="#">Account</a></li>
                </ul>
            </nav>
        </div>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
    </header>

    <!-- Slideshow -->
    {% if slides %}
    <section class="slideshow-section">
        <div class="slideshow-carousel" id="slideshow">
            <div class="slideshow-wrapper">
                {% for slide in slides %}
                <div class="slideshow-slide {% if forloop.first %}active{% endif %}">
                    <a href="{{ slide.link_url|default:'#' }}" class="slide-link">
                        <picture>
                            {% if slide.image_mobile %}
                            <source media="(max-width: 768px)" srcset="{{ slide.image_mobile.url }}">
                            {% endif %}
                            <img src="{{ slide.image_desktop.url }}" 
                                 alt="{{ slide.title }}" 
                                 class="slide-image"
                                 loading="{% if forloop.first %}eager{% else %}lazy{% endif %}">
                        </picture>
                        
                        {% if slide.title or slide.description %}
                        <div class="slide-content">
                            {% if slide.title %}<h2 class="slide-title">{{ slide.title }}</h2>{% endif %}
                            {% if slide.description %}<p class="slide-description">{{ slide.description }}</p>{% endif %}
                        </div>
                        {% endif %}
                    </a>
                </div>
                {% endfor %}
            </div>

            <div class="slideshow-dots">
                {% for slide in slides %}
                <button class="dot {% if forloop.first %}active{% endif %}" 
                        onclick="goToSlide({{ forloop.counter0 }})"
                        aria-label="Go to slide {{ forloop.counter }}"></button>
                {% endfor %}
            </div>

            <button class="slide-arrow slide-arrow-prev" onclick="changeSlide(-1)" aria-label="Previous">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button class="slide-arrow slide-arrow-next" onclick="changeSlide(1)" aria-label="Next">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
    </section>
    {% endif %}

{% if occasions %}
<section class="occasion-section">
    <div class="container">
        <!-- Heading -->
        <div class="occasion-heading">
            <img src="{% static 'images/decorative-top.png' %}" alt="" class="heading-decoration">
            <h2 class="section-title">Explore Collections</h2>
            <img src="{% static 'images/decorative-bottom.png' %}" alt="" class="heading-decoration">
        </div>

        <!-- Occasion Grid -->
        <div class="occasion-grid">
            {% for occasion in occasions %}
            <a href="{{ occasion.get_absolute_url }}" class="occasion-card">
                <div class="occasion-image-wrapper">
                    <img src="{{ occasion.image.url }}" 
                         alt="{{ occasion.name }}" 
                         class="occasion-image"
                         loading="lazy">
                    <div class="occasion-overlay">
                        <h3 class="occasion-name">{{ occasion.name }}</h3>
                        <button class="explore-btn">Buy now</button>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Our Bestsellers Section -->
{% if bestsellers %}
<section class="bestsellers-section">
    <div class="container">
        <!-- Heading -->
        <div class="section-heading">
            <img src="{% static 'images/decorative-top.png' %}" alt="" class="heading-decoration">
            <h2 class="section-title">Our Bestsellers</h2>
            <img src="{% static 'images/decorative-bottom.png' %}" alt="" class="heading-decoration">
        </div>

        <!-- Product Grid Carousel -->
        <div class="bestsellers-carousel">
            <button class="carousel-nav carousel-nav-prev" id="bestsellersPrev" aria-label="Previous">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            <div class="bestsellers-grid" id="bestsellersGrid">
                {% for product in bestsellers %}
                <div class="product-card">
                    <!-- Badge -->
                    {% if product.discount_percentage > 0 %}
                    <div class="product-badge">
                        Save ₹{{ product.savings|floatformat:0 }}
                    </div>
                    {% endif %}

                    <!-- Image -->
                    <a href="{{ product.get_absolute_url }}" class="product-image-wrapper">
                        <img src="{{ product.image.url }}" 
                             alt="{{ product.name }}" 
                             class="product-image product-image-primary"
                             loading="lazy">
                        {% if product.image_hover %}
                        <img src="{{ product.image_hover.url }}" 
                             alt="{{ product.name }}" 
                             class="product-image product-image-hover"
                             loading="lazy">
                        {% endif %}
                    </a>

                    <!-- Product Info -->
                    <div class="product-info">
                        <a href="{{ product.get_absolute_url }}" class="product-name">
                            {{ product.name }}
                        </a>

                        <!-- Price -->
                        <div class="product-price">
                            <span class="price-sale">₹{{ product.sale_price|floatformat:0 }}</span>
                            {% if product.original_price > product.sale_price %}
                            <span class="price-original">₹{{ product.original_price|floatformat:0 }}</span>
                            <span class="price-discount">{{ product.discount_percentage }}% Off</span>
                            {% endif %}
                        </div>

                        <!-- Rating -->
                        <div class="product-rating">
                            <div class="rating-stars">
                                {% for i in "12345" %}
                                    {% if product.rating >= forloop.counter %}
                                    <svg class="star star-filled" width="14" height="14" viewBox="0 0 12 11">
                                        <path d="M6 0v8.635L2.292 11 3.48 6.87 0 4.202l4.443-.187L6 0Zm0 0v8.635L9.708 11 8.52 6.87 12 4.202l-4.443-.187L6 0Z" fill="#d32f2f"/>
                                    </svg>
                                    {% else %}
                                    <svg class="star star-empty" width="14" height="14" viewBox="0 0 12 11">
                                        <path d="M6 0v8.635L2.292 11 3.48 6.87 0 4.202l4.443-.187L6 0Zm0 0v8.635L9.708 11 8.52 6.87 12 4.202l-4.443-.187L6 0Z" fill-opacity="0.3" fill="#666"/>
                                    </svg>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <span class="rating-text">({{ product.rating|floatformat:1 }})</span>
                        </div>

                        <!-- Add to Cart -->
                        <button class="product-add-cart" data-product-id="{{ product.id }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M4.75 8.25A.75.75 0 0 0 4 9L3 19.125c0 1.418 1.207 2.625 2.625 2.625h12.75c1.418 0 2.625-1.149 2.625-2.566L20 9a.75.75 0 0 0-.75-.75H4.75Zm2.75 0v-1.5a4.5 4.5 0 0 1 4.5-4.5v0a4.5 4.5 0 0 1 4.5 4.5v1.5" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            <span>Add to Cart</span>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>

            <button class="carousel-nav carousel-nav-next" id="bestsellersNext" aria-label="Next">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <!-- View All Button -->
        <div class="section-footer">
            <a href="/products/" class="view-all-btn">View All Products</a>
        </div>
    </div>
</section>
{% endif %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Manovastra. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/slideshow.js' %}"></script>
</body>
</html>
